# $ create-esm [å¾…æ‹·è´çš„æ–‡ä»¶ã€æ–‡ä»¶å¤¹] [é€‰é¡¹]

> è¿™æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç»™åˆ° ESM æºç æ–‡ä»¶è·¯å¾„åï¼Œè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªé¡¹ç›®ã€æ‰“åŒ…ã€å‘å¸ƒï¼Œç¡®ä¿ä¸€ä¸ªæŒ‡ä»¤å³å¯åœ¨é¡¹ç›®ä¸­å®‰è£…ä½¿ç”¨ï¼Œè¿›è€Œæ”¯æŒè·¨é¡¹ç›®ä½¿ç”¨ã€‚

å¦‚æœæœ‰é¢‘ç¹æ–°å»º ESM é¡¹ç›®çš„éœ€æ±‚ï¼Œè¿™ä¸ªè„šæ‰‹æ¶ä¼šè®©è¿™ä»¶äº‹å˜å¾—å¾ˆè½»æ¾ã€‚

åˆ›å»ºé¡¹ç›®ã€é…ç½®é¡¹ç›®... æƒ³æƒ³è¿˜æ˜¯å¾ˆè€—æ—¶ã€å¤æ‚çš„ã€‚ç®€å•æ¥çœ‹ï¼Œä½¿ç”¨ç°æœ‰çš„ç”Ÿæˆå™¨ï¼Œéƒ½æ˜¯ç”Ÿæˆä¸€ä¸ªé¡¹ç›®ï¼Œå†å¢ã€æ”¹æ–‡ä»¶ï¼Œå†æ¨é€åˆ°ä»£ç ä»“åº“ï¼Œå†å‘å¸ƒã€‚è¿™ä¸ªè¿‡ç¨‹ï¼Œç†æƒ³æƒ…å†µä¹Ÿå¾—è€—æ—¶ä¸ªå‡ åˆ†é’Ÿï¼Œè¶³ä»¥æ‰“æ–­æ€è·¯ã€åˆ†æ•£æ³¨æ„åŠ›ï¼Œä»¤äººæœ›è€Œå´æ­¥ã€‚

è€Œæ—¥å¸¸å¼€å‘æ´»åŠ¨ä¸­ï¼Œæˆ‘ä»¬éƒ½åœ¨å¼€å‘å…·ä½“çš„ä¸šåŠ¡é¡¹ç›®ï¼Œä¸å¯èƒ½ä¸€æ¬¡åˆä¸€æ¬¡åœ°åƒä¸Šè¿°ä¸€æ ·åˆ›å»ºé¡¹ç›®ï¼Œä½†æˆ‘ä»¬ç¼–å†™çš„å¾ˆå¤šä»£ç éƒ½çš„ç¡®å¯ä»¥æ¨¡å—åŒ–ï¼Œå‘åŒ…ä»¥è·¨é¡¹ç›®ä½¿ç”¨ï¼Œä½†å› ä¸ºä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬ä¸€æ¬¡æ¬¡åœ°ä¸è€ƒè™‘è¿™ä¹ˆåšï¼Œæˆ–è€…å‚¬çœ è‡ªå·±ï¼šç­‰ç©ºé—²äº†å†åšï¼Œå› ä¸ºçš„ç¡®æœ‰äº›æœ¬æœ«å€’ç½®ï¼Œå¦‚æœå½±å“åˆ°äº†æœ¬åˆ†å·¥ä½œï¼Œé‚£å°±æ¯çŠŠå­äº†ã€‚

ä¸è¿‡è¿™ä¸ªé—®é¢˜ä¹Ÿä¸æ˜¯ä¸å¯è§£å†³ã€‚æ¢ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬åœ¨å†™é¡¹ç›®ä»£ç æ—¶ï¼Œæ¨¡å—åŒ–ä¸€æ®µä»£ç åï¼ŒæŒ‡å®šä»è¿™ä¸ªä»£ç æ–‡ä»¶ï¼Œè‡ªåŠ¨åŒ–åˆ›å»ºå¹¶å‘å¸ƒä¸€ä¸ªé¡¹ç›®ï¼Œå³å¯ã€‚ä¸€ä¸ªæŒ‡ä»¤å³å¯åœ¨åˆ›å»ºé¡¹ç›®ã€å‘åŒ…ã€åœ¨é¡¹ç›®ä¸­å®‰è£…ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥è·¨é¡¹ç›®ä½¿ç”¨ï¼Œè€—æ—¶å°åˆ°å‡ ä¹å¯ä»¥å¿½ç•¥ï¼Œä¹Ÿå°±ä¸å­˜åœ¨æœ¬æœ«å€’ç½®çš„é—®é¢˜äº†ã€‚

æƒ³è±¡ä¸‹ï¼Œåœ¨é¡¹ç›®ä¸­ï¼Œä½ å†™å¥½äº†ä¸€ä¸ªåŠŸèƒ½ï¼Œè¿è¡Œä¸€ä¸ªæŒ‡ä»¤åï¼Œå°±å¯ä»¥åœ¨é¡¹ç›®ä¸­è¿è¡Œ `npm i XXX` å®‰è£…è¿™éƒ¨åˆ†ä»£ç ï¼Œæ•´ä¸ªè€—æ—¶å¯èƒ½å°±å‡ ç§’é’Ÿã€‚

è¿™ä¹ˆåšçš„å¥½å¤„å¾ˆå¤šï¼Œ

- èƒ½å¤ç”¨çš„ä»£ç éƒ½ä»é¡¹ç›®ä¸­ç‹¬ç«‹äº†å‡ºå»ï¼Œæ‰€ä»¥é¡¹ç›®é‡Œå°½æ˜¯ä¸šåŠ¡ä»£ç ï¼Œç¡®ä¿äº†ä¸šåŠ¡ä»£ç çš„çº¯å‡€åº¦ï¼Œå¯ä»¥ä»ä¸€å®šç¨‹åº¦ä¸Šæå‡ä¸šåŠ¡æ¨è¿›çš„æ•ˆç‡ï¼›
- å¤å®¡ç²¾åº¦æŒ‡æ•°çº§æé«˜ï¼›
- TDD é«˜åº¦å¯è¡Œï¼Œç³»ç»Ÿçš„æµ‹è¯•è¦†ç›–ç‡æŒ‡æ•°çº§æé«˜ï¼›
- æ»¡è¶³å‘åŒ…æ¡ä»¶çš„æ¨¡å—ï¼Œä¹Ÿå¿…ç„¶æ˜¯ç»è¿‡è‰¯å¥½è®¾è®¡çš„ï¼Œæ‰€ä»¥è¿™åˆè¿›ä¸€æ­¥åå‘æå‡äº†ç³»ç»Ÿçš„è´¨é‡ï¼›
- ......

## ç›®å½•

- [ä½¿ç”¨](#ä½¿ç”¨)
  - [æ ¹æ®å‘½ä»¤è¡Œæç¤ºä¸€æ­¥æ­¥æ“ä½œ](#æ ¹æ®å‘½ä»¤è¡Œæç¤ºä¸€æ­¥æ­¥æ“ä½œ)
  - [æŸ¥çœ‹å‘½ä»¤è¡Œå‚æ•°è¯´æ˜](#æŸ¥çœ‹å‘½ä»¤è¡Œå‚æ•°è¯´æ˜)
  - [ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°ç›´æ¥åˆ›å»ºé¡¹ç›®](#ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°ç›´æ¥åˆ›å»ºé¡¹ç›®)
  - [æŸ¥çœ‹å…¨å±€é…ç½®](#æŸ¥çœ‹å…¨å±€é…ç½®)
  - [æ›´æ–°å…¨å±€é…ç½®](#æ›´æ–°å…¨å±€é…ç½®)
  - [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [å®‰è£…](#å®‰è£…)
  - [NPM](#npm)
  - [PNPM](#pnpm)
  - [Yarn](#yarn)
- [å‚ä¸è´¡çŒ®](#å‚ä¸è´¡çŒ®)

## ä½¿ç”¨

<!-- è„šæ‰‹æ¶åšäº†å“ªäº›äº‹ï¼Ÿ -->

è¢«ç”Ÿæˆçš„é¡¹ç›®å…·æœ‰ä¸€ä¸‹ç‰¹å¾ï¼Œ

- ESMï¼›
- å­˜åœ¨ç¼–ç é£æ ¼æ§åˆ¶ï¼›
- TDDï¼›
- Node.js >= v12.20.0ï¼›
- .vscode é…ç½®ï¼›
- é»˜è®¤ä½¿ç”¨ PNPM åŒ…ç®¡ç†å™¨ï¼›
- åŒ…å«åŸºæœ¬ç»“æ„çš„ README.mdï¼›ï¼ˆå¯ä»¥ç…§æ¨¡å­ç”»ç“¢ï¼‰
- å¼€æºï¼›
- åœ¨ Github ä¸Šæ‰˜ç®¡æºç ï¼›
- å‘å¸ƒåœ¨ NPM ä¸Šï¼›

å¦å¤–ï¼Œå¦‚æœé¡¹ç›®è¦åˆ›å»ºåœ¨ GitHub ç»„ç»‡ä¸‹ï¼Œæˆ–å‘å¸ƒåˆ°ç‰¹å®š NPM å‘½åç©ºé—´ä¸‹ï¼Œå®ƒä»¬éƒ½éœ€è¦è¢«æå‰æ‰‹åŠ¨åˆ›å»ºå¥½ã€‚

### æ ¹æ®å‘½ä»¤è¡Œæç¤ºä¸€æ­¥æ­¥æ“ä½œ

```shell
create-esm /Users/iyowei/Development/iyowei/create-esm/src/print.js
```

![Kapture 2021-12-16 at 21 24 14](https://user-images.githubusercontent.com/5499703/146546818-848b478e-90b7-4891-875d-b00a5dd143ee.gif)

> å¿…é¡»æä¾›å¾…æ‹·è´çš„æ–‡ä»¶ã€æ–‡ä»¶å¤¹ï¼Œå¦åˆ™æ‰§è¡Œç»“æœç±»ä¼¼äº `create-esm --help`ã€‚

### æŸ¥çœ‹å‘½ä»¤è¡Œå‚æ•°è¯´æ˜

è¿è¡Œ `create-esm` æˆ– `create-esm --help` å³å¯ã€‚

```shell
  ä½¿ç”¨æ–¹å¼
    $ create-esm [æŒ‡å®šå¾…æ‹·è´çš„æ–‡ä»¶ã€æ–‡ä»¶å¤¹] [é€‰é¡¹]

  é€‰é¡¹
    --name, -n                                 åŒ…åï¼ˆå®é™…å®‰è£…æ—¶ä½¿ç”¨çš„åç§°ï¼‰
    --description                              æè¿°
    --output, -o                               æ–°å»ºé¡¹ç›®çš„ç£ç›˜ä½ç½®
    --dependencies, -d                         æ‰‹åŠ¨æŒ‡å®šè¦å®‰è£…çš„ä¾èµ–
    --sshkey                                   ç§é’¥æ–‡ä»¶åœ°å€
    --no-double-check-dependencies             ä¸éœ€è¦äºŒæ¬¡ç¡®è®¤æ˜¯å¦è¿˜æœ‰å…¶å®ƒä¾èµ–éœ€è¦å®‰è£…
    --no-confirm-github-org                    å¦‚æœåŒ…åæœ‰å‘½åç©ºé—´ï¼Œåˆ™ç¡®è®¤æ˜¯å¦éœ€è¦åœ¨æŸä¸ª Github Org ä¸‹åˆ›å»ºé¡¹ç›®

    --version, -v                              æŸ¥çœ‹ç‰ˆæœ¬å·
    --help, -h                                 æŸ¥çœ‹å¸®åŠ©

  å‘½ä»¤
    set                                        è®¾ç½® create-esm å…¨å±€è®¾ç½®
    reset                                      æ¸…ç©º create-esm å…¨å±€è®¾ç½®
    defaults                                   æŸ¥çœ‹ create-esm å…¨å±€è®¾ç½®

  ç¤ºä¾‹
    $ create-esm
    $ create-esm /Users/iyowei/Development/generators/create-esm/src/notEmptyString.js
```

ç†Ÿæ‚‰å‘½ä»¤è¡Œå‚æ•°åï¼Œç›¸æ¯”äº¤äº’å¼å‘½ä»¤è¡Œç•Œé¢ä¸‹è¾“å…¥å‚æ•°å€¼ï¼Œå¯é€‰æ‹©å‘½ä»¤è¡Œå‚æ•°ç›´ä¾›çš„æ–¹å¼ï¼Œé«˜æ•ˆçš„å¤šã€‚

### ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°ç›´æ¥åˆ›å»ºé¡¹ç›®

##### åœ¨ [Github ä¸ªäººè´¦æˆ·][github personal] ä¸‹åˆ›å»º [scoped][scoped] åŒ…

```shell
create-esm \
/Users/iyowei/Development/iyowei/create-esm/src/lsDir.js \
/Users/iyowei/Development/iyowei/create-esm/src/README.md \ # æ‰“åŒ…å‰ï¼Œé¡¹ç›®ä¸­æ¯ä¸ªæ¨¡å—éƒ½æœ‰è‡ªå·±çš„ README.md æ–‡ä»¶ï¼Œæ¯”è¾ƒæ¨è
-n @iyowei/test-scan-dir \
--personal \
-p "å¹¶è¡Œæ‰«ææ–‡ä»¶å¤¹ï¼Œå¯åœ¨æ‰«æçš„åŒæ—¶æ›´æ–°æˆ–è¿‡æ»¤æ•°æ®ï¼Œä¸€å®šç¨‹åº¦å¤ç”¨éå†ã€‚" \
-o "/Users/iyowei/Development/iyowei" \
--sshkey "~/.ssh/github" \
--no-double-check-dependencies
```

##### åœ¨ **åŒå** [Github ç»„ç»‡][github org] ä¸‹åˆ›å»º [scoped][scoped] åŒ…

```shell
create-esm \
/Users/iyowei/Development/iyowei/create-esm/src/lsDir.js \
/Users/iyowei/Development/iyowei/create-esm/src/README.md \ # æ‰“åŒ…å‰ï¼Œé¡¹ç›®ä¸­æ¯ä¸ªæ¨¡å—éƒ½æœ‰è‡ªå·±çš„ README.md æ–‡ä»¶ï¼Œæ¯”è¾ƒæ¨è
-n @iyowei/test-scan-dir \
-p "å¹¶è¡Œæ‰«ææ–‡ä»¶å¤¹ï¼Œå¯åœ¨æ‰«æçš„åŒæ—¶æ›´æ–°æˆ–è¿‡æ»¤æ•°æ®ï¼Œä¸€å®šç¨‹åº¦å¤ç”¨éå†ã€‚" \
-o "/Users/iyowei/Development/iyowei" \
--sshkey "~/.ssh/github" \
--no-double-check-dependencies
```

##### åœ¨ **å¼‚å** [Github ç»„ç»‡][github org] ä¸‹åˆ›å»º [unscoped][unscoped] åŒ…

```shell
create-esm \
/Users/iyowei/Development/iyowei/create-esm/src/lsDir.js \
/Users/iyowei/Development/iyowei/create-esm/src/README.md \ # æ‰“åŒ…å‰ï¼Œé¡¹ç›®ä¸­æ¯ä¸ªæ¨¡å—éƒ½æœ‰è‡ªå·±çš„ README.md æ–‡ä»¶ï¼Œæ¯”è¾ƒæ¨è
-n test-scan-dir \
--github-org iyoha \
-p "å¹¶è¡Œæ‰«ææ–‡ä»¶å¤¹ï¼Œå¯åœ¨æ‰«æçš„åŒæ—¶æ›´æ–°æˆ–è¿‡æ»¤æ•°æ®ï¼Œä¸€å®šç¨‹åº¦å¤ç”¨éå†ã€‚" \
-o "/Users/iyowei/Development/iyowei" \
--sshkey "~/.ssh/github" \
--no-double-check-dependencies
```

### æŸ¥çœ‹å…¨å±€é…ç½®

```shell
create-esm defaults
```

### æ›´æ–°å…¨å±€é…ç½®

```shell
create-esm set [key] [value]
```

è¿è¡Œ `create-esm defaults` äº†è§£å…·ä½“æœ‰å“ªäº›å…¨å±€é…ç½®ã€‚

### æœ€ä½³å®è·µ

- æ‰“åŒ…å‰ï¼Œé¡¹ç›®ä¸­æ¯ä¸ªæ¨¡å—éƒ½æœ‰è‡ªå·±çš„ README.md æ–‡ä»¶ï¼Œæ¯”è¾ƒæ¨èï¼›

## å®‰è£…

[![Node Version Badge][node version badge]][download node.js] ![esm][esm]

ä¾èµ–çš„å·¥å…·æœ‰å‡ ä¸ªï¼Œéƒ¨åˆ†æ“ä½œæ²¡æ³•å„¿è‡ªåŠ¨åŒ–ï¼Œä¸è¿‡å¥½åœ¨è¿™äº›äº‹æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œ

- å®‰è£… [PNPM][pnpm] åŒ…ç®¡ç†å™¨ï¼›ï¼ˆç”Ÿæˆçš„é¡¹ç›®ç»Ÿä¸€ä½¿ç”¨ PNPM ç®¡ç†ï¼‰
- **å®‰è£… [Github Cli][github cli]ï¼Œä½¿ç”¨ [å®‰å…¨çš„ SSH ç®¡é“][å®‰å…¨çš„ ssh ç®¡é“] é€‰é¡¹ [ç™»å½•][ç™»å½• github cli]**ï¼›ï¼ˆåˆ›å»ºã€æ¨é€ã€æ‹‰å– Github é¡¹ç›®ç­‰ï¼‰
- [ç™»å½• NPM][ç™»å½• npm]ï¼›ï¼ˆå‘åŒ…ï¼‰

å…¬é’¥è¦æ·»åŠ åˆ° Github ä¸Šï¼Œå¦å¤–ä¿å­˜å¥½ç§˜é’¥ä½ç½®ï¼Œç§é’¥è¦ç”¨æ¥å»ºç«‹ [å®‰å…¨çš„ SSH ç®¡é“][å®‰å…¨çš„ ssh ç®¡é“]ï¼Œ"@iyowei/create-esm" é€šè¿‡ `--sshkey` å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šç§é’¥ï¼Œæˆ–è€…å…¨å±€è®¾ç½® `sshkey` å³å¯ï¼Œè¿è¡Œ `create-esm set sshkey [ç§é’¥ç»å¯¹è·¯å¾„]`ã€‚

å¦å¤–ï¼Œè¿˜æœ‰ç‚¹åŸºæœ¬çš„å…¨å±€ Git è®¾ç½®ï¼Œåˆ›å»ºé¡¹ç›®ã€æäº¤ä¿®æ”¹æ—¶éœ€è¦ï¼Œ

- **`git config --global init.defaultBranch main`**ï¼›
- `git config â€”-global user.email â€œyou@example.comâ€`ï¼›
- `git config --global user.name "Your Name"`ï¼›

å®‰è£… "@iyowei/create-esm"ï¼Œ

### NPM

```shell
npm i @iyowei/create-esm --global
```

### PNPM

```shell
pnpm add @iyowei/create-esm --global
```

### Yarn

```shell
yarn global add @iyowei/create-esm
```

ä¸Šè¿°éƒ½å®‰è£…ã€é…ç½®å¥½åï¼Œå°±å¯ä»¥é¡ºåˆ©ä½¿ç”¨ "create-esm" è„šæ‰‹æ¶äº†ã€‚å¯¹äº†ï¼Œ**ä½¿ç”¨æ—¶å¾—è”ç½‘**ã€‚ğŸ˜ƒ

## å‚ä¸è´¡çŒ®

![PRs Welcome][prs welcome badge]

[esm]: https://img.shields.io/badge/ESM-brightgreen?style=flat
[pnpm]: https://pnpm.io/zh/installation
[github cli]: https://cli.github.com/
[ç™»å½• github cli]: https://cli.github.com/manual/gh_auth_login
[ç™»å½• npm]: https://docs.npmjs.com/cli/v7/commands/npm-adduser
[å®‰å…¨çš„ ssh ç®¡é“]: https://docs.github.com/cn/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent
[node version badge]: https://img.shields.io/badge/node.js-%3E%3D12.20.0-brightgreen?style=flat&logo=Node.js
[download node.js]: https://nodejs.org/en/download/
[prs welcome badge]: https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat
[scoped]: https://docs.npmjs.com/creating-and-publishing-scoped-public-packages
[unscoped]: https://docs.npmjs.com/creating-and-publishing-unscoped-public-packages
[github org]: https://docs.github.com/cn/organizations/collaborating-with-groups-in-organizations/about-organizations
[github personal]: https://docs.github.com/cn/get-started/learning-about-github/types-of-github-accounts#personal-accounts

<!-- æ›´å¤šæ–‡æ¡£ç»†èŠ‚ï¼Œå‚è€ƒ https://github.com/iyowei/readme-templates -->
